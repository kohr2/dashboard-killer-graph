{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Advanced Relationships Schema",
  "description": "Schema for defining advanced relationships in ontologies",
  "type": "object",
  "properties": {
    "advancedRelationships": {
      "type": "object",
      "description": "Configuration for advanced relationships",
      "properties": {
        "temporal": {
          "type": "object",
          "description": "Temporal relationship configurations",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Whether temporal analysis is enabled for this ontology"
            },
            "patterns": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Pattern name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Pattern description"
                  },
                  "entityTypes": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Entity types involved in this pattern"
                  },
                  "relationshipType": {
                    "type": "string",
                    "description": "Type of temporal relationship"
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.8,
                    "description": "Default confidence score"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata for the pattern"
                  }
                },
                "required": ["name", "description", "entityTypes", "relationshipType"]
              }
            },
            "timeWindow": {
              "type": "object",
              "properties": {
                "defaultDuration": {
                  "type": "number",
                  "description": "Default duration in days"
                },
                "maxDuration": {
                  "type": "number",
                  "description": "Maximum duration in days"
                },
                "minDuration": {
                  "type": "number",
                  "description": "Minimum duration in days"
                }
              }
            }
          }
        },
        "hierarchical": {
          "type": "object",
          "description": "Hierarchical relationship configurations",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Whether hierarchical analysis is enabled"
            },
            "structures": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Structure name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Structure description"
                  },
                  "parentType": {
                    "type": "string",
                    "description": "Parent entity type"
                  },
                  "childType": {
                    "type": "string",
                    "description": "Child entity type"
                  },
                  "relationshipType": {
                    "type": "string",
                    "description": "Relationship type between parent and child"
                  },
                  "maxLevels": {
                    "type": "number",
                    "default": 3,
                    "description": "Maximum hierarchy levels"
                  },
                  "properties": {
                    "type": "object",
                    "description": "Default properties for this hierarchy"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                },
                "required": ["name", "description", "parentType", "childType", "relationshipType"]
              }
            }
          }
        },
        "similarity": {
          "type": "object",
          "description": "Similarity relationship configurations",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Whether similarity analysis is enabled"
            },
            "algorithms": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Algorithm name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Algorithm description"
                  },
                  "entityType": {
                    "type": "string",
                    "description": "Entity type to analyze"
                  },
                  "factors": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "property": {
                          "type": "string",
                          "description": "Property name to compare"
                        },
                        "weight": {
                          "type": "number",
                          "minimum": 0,
                          "maximum": 1,
                          "description": "Weight of this factor in similarity calculation"
                        },
                        "type": {
                          "type": "string",
                          "enum": ["exact", "fuzzy", "numeric", "categorical"],
                          "description": "Type of comparison"
                        }
                      },
                      "required": ["property", "weight", "type"]
                    }
                  },
                  "threshold": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.5,
                    "description": "Minimum similarity score to create relationship"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                },
                "required": ["name", "description", "entityType", "factors"]
              }
            }
          }
        },
        "complex": {
          "type": "object",
          "description": "Complex relationship pattern configurations",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Whether complex pattern analysis is enabled"
            },
            "patterns": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Pattern name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Pattern description"
                  },
                  "cypherQuery": {
                    "type": "string",
                    "description": "Cypher query to detect the pattern"
                  },
                  "parameters": {
                    "type": "object",
                    "description": "Default parameters for the query"
                  },
                  "resultMapping": {
                    "type": "object",
                    "description": "Mapping of query results to relationship properties"
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1,
                    "default": 0.8,
                    "description": "Default confidence score"
                  },
                  "enabled": {
                    "type": "boolean",
                    "default": true,
                    "description": "Whether this pattern is enabled"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                },
                "required": ["name", "description", "cypherQuery"]
              }
            }
          }
        },
        "queries": {
          "type": "object",
          "description": "Predefined query configurations",
          "properties": {
            "timeline": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "customQuery": {
                  "type": "string",
                  "description": "Custom Cypher query for timeline analysis"
                }
              }
            },
            "hierarchy": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "customQuery": {
                  "type": "string",
                  "description": "Custom Cypher query for hierarchy analysis"
                }
              }
            },
            "similarity": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "customQuery": {
                  "type": "string",
                  "description": "Custom Cypher query for similarity analysis"
                }
              }
            },
            "complex": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": true
                },
                "customQuery": {
                  "type": "string",
                  "description": "Custom Cypher query for complex pattern analysis"
                }
              }
            }
          }
        }
      }
    }
  }
} 