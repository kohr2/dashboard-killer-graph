{
  "name": "financial",
  "source": "https://spec.edmcouncil.org/fibo/",
  "dependencies": ["crm"],
  "entities": {
    "Investor": {
      "description": "A party that owns some stake in an organization by way of investment. This is regardless of whether the investor is also a constitutional owner (e.g., shareholder) in the entity. Based on FIBO definition.",
      "properties": {
        "name": { "type": "string", "description": "Investor name" },
        "type": { "type": "string", "description": "Type of investor (PE, VC, etc.)" },
        "aum": { "type": "number", "description": "Assets under management" }
      }
    },
    "Fund": {
      "description": "A collective investment vehicle (CIV) consisting of a pool of funds from multiple investors, managed by a professional firm. Examples include private equity funds, hedge funds, or mutual funds. Based on FIBO's concept of an Investment Fund."
    },
    "Deal": {
      "keyProperties": ["dealType", "sector", "purpose"],
      "vectorIndex": true,
      "description": "A specific business or financial transaction that is proposed, under negotiation, or completed. It represents an opportunity for investment, acquisition, or partnership between parties, aligned with the FIBO concept of a financial transaction.",
      "properties": {
        "dealSize": { "type": "number", "description": "The size of the deal in currency units" },
        "sector": { "type": "string", "description": "The industry sector of the target company" },
        "dealType": { "type": "string", "description": "Type of deal (M&A, LBO, Growth, etc.)" },
        "purpose": { "type": "string", "description": "Purpose of the investment" },
        "status": { "type": "string", "description": "Current status of the deal" }
      }
    },
    "TargetCompany": {
      "keyProperties": ["industry", "website"],
      "vectorIndex": true,
      "description": "The legal entity (e.g., corporation, partnership) that is the subject of a deal, such as an acquisition, merger, or investment. It is the company being acquired, invested in, or partnered with. Aligned with FIBO's concept of a 'Contractually Capable Entity'."
    },
    "Sector": {
      "vectorIndex": true,
      "description": "An industry sector or sub-sector used to classify a company based on its primary business activities. Aligned with FIBO's 'Industry Sector Classifier' and typically based on a standard like GICS (Global Industry Classification Standard)."
    },
    "GeographicRegion": {
      "keyProperties": ["country"],
      "description": "A geographic or geopolitical area, such as a country, state, or city, relevant to a deal or an entity's operations. Aligned with FIBO's 'Geographic Region' and 'Geopolitical Entity' concepts from its Locations ontology."
    },
    "Mandate": {
      "description": "A set of rules, policies, and objectives that govern an investment fund's strategy. It defines constraints such as asset classes, geographic focus, sector focus, and deal size. Aligned with FIBO's 'Fund Portfolio Investment Policy' concept."
    },
    "Sponsor": {
      "description": "The entity, typically a private equity firm, that initiates, manages, and promotes a specific fund or deal. Aligned with FIBO's 'Fund Management Company' concept, which is also referred to as 'fund sponsor'."
    },
    "Relationship": {
      "description": "A documented connection between two or more legal entities, such as co-investors, a sponsor and a target company, or past employment. Aligned with FIBO's concept of a 'Relationship Record' used for describing relationships between legal entities."
    },
    "Event": {
      "description": "A point-in-time happening relevant to a deal or entity, such as a bid, investment, exit, or due diligence process. Aligned with FIBO's general concept of an 'Occurrence' (or 'Event'), often specializing as a 'Transaction Event'."
    },
    "MonetaryAmount": {
        "isProperty": true,
        "description": "An amount of money, typically associated with a deal size, fund size, or transaction value. To be used as a property of another entity."
    },
    "Date": {
        "isProperty": true,
        "description": "A specific point in time, such as a deadline, closing date, or event date. To be used as a property of another entity."
    },
    "Percent": {
        "isProperty": true,
        "description": "A percentage value, such as an interest rate, ownership stake, or deal likelihood. To be used as a property of another entity."
    },
    "Time": {
        "isProperty": true,
        "description": "A specific time of day, often associated with an event or deadline. To be used as a property of another entity."
    },
    "Document": {
      "description": "A piece of written, printed, or electronic matter that provides information or evidence related to a financial context, such as an NDA, CIM, or legal agreement. Aligned with FIBO's concept of a 'Legal Document' or 'Contractual Document'."
    },
    "Process": {
      "description": "A series of actions or steps taken to achieve a financial outcome, such as a due diligence process, a bidding process, or an underwriting process. Aligned with FIBO's 'Business Process' concept."
    },
    "LegalDocument": {
      "parent": "Document",
      "description": "A document with legal significance within a financial context, such as a merger agreement, NDA, or credit agreement. Aligned with FIBO's 'Legal Document' concept."
    },
    "RegulatoryInformation": {
      "description": "Information related to regulatory filings, such as SEC filings (e.g., 10-K, 8-K) or other disclosures to a regulatory authority. This entity can be linked to a company or a deal to provide context on compliance and regulatory events."
    },
    "Communication": {
      "description": "Email or other communication related to deals and investments",
      "properties": {
        "subject": { "type": "string", "description": "Communication subject" },
        "date": { "type": "date", "description": "Communication date" },
        "type": { "type": "string", "description": "Type of communication" },
        "participants": { "type": "array", "description": "Communication participants" }
      }
    }
  },
  "relationships": {
    "INVESTED_IN": { "domain": "Investor", "range": "Deal", "description": "Historical or active participation" },
    "MANAGES": { "domain": "Investor", "range": "Fund", "description": "Investor manages Fund X" },
    "HAS_MANDATE": { "domain": "Fund", "range": "Mandate", "description": "Fund strategy constraints" },
    "TARGETS": { "domain": "Deal", "range": "TargetCompany", "description": "Entity targeted in the deal" },
    "OPERATES_IN": { "domain": "TargetCompany", "range": ["Sector", "GeographicRegion"], "description": "Sector classification" },
    "HAS_PROCESS_TYPE": { "domain": "Deal", "range": "string", "description": "e.g., auction, bilateral" },
    "BID_ON": { "domain": "Investor", "range": "Deal", "description": "Investor participated in bid" },
    "HAS_RELATIONSHIP_WITH": { "domain": "Investor", "range": ["Sponsor", "TargetCompany"], "description": "Past interaction or deal co-participation" },
    "EXITED": { "domain": "Investor", "range": "Deal", "description": "Indicates past divestment" },
    "HAS_INTEREST_IN": { "domain": "Investor", "range": "Sector", "description": "Indicates an investor's interest in a specific market sector." },
    "HAS_DOCUMENT": { "domain": "Deal", "range": "Document", "description": "Associates a deal with a related document, such as an NDA or CIM." },
    "FOLLOWS_PROCESS": { "domain": "Deal", "range": "Process", "description": "Describes the process a deal is following, such as an auction or a proprietary sourcing method." },
    "INVESTS_IN": {
      "domain": "Investor",
      "range": "Deal",
      "description": "Investment relationship"
    },
    "TARGETS": {
      "domain": "Deal",
      "range": "Organization",
      "description": "Target company relationship"
    },
    "OWNS": {
      "domain": "Fund",
      "range": "Deal",
      "description": "Fund ownership of deal"
    },
    "INVOLVES": {
      "domain": "Organization",
      "range": "Deal",
      "description": "Organization involvement in deal"
    },
    "CONTAINS_ENTITY": {
      "domain": "Communication",
      "range": ["Organization", "Deal", "Fund", "Investor"],
      "description": "Communication contains entity mention"
    }
  },
  "reasoning": {
    "algorithms": {
      "similarity_scoring": {
        "name": "similarity_scoring",
        "description": "Calculate similarity between deals based on sector, dealType, and purpose",
        "entityType": "Deal",
        "factors": ["sector", "dealType", "purpose"],
        "weights": [0.5, 0.3, 0.2],
        "threshold": 0.5,
        "relationshipType": "DEAL_SIMILARITY"
      },
      "risk_assessment": {
        "name": "risk_assessment",
        "description": "Assess risk based on investor failure rate and sector volatility",
        "entityType": "Deal",
        "factors": ["investor_failure_rate", "sector_volatility"],
        "weights": [0.6, 0.4],
        "threshold": 0.7
      },
      "pattern_detection": {
        "name": "pattern_detection",
        "description": "Detect successful deal patterns",
        "entityType": "Deal",
        "pattern": "e.status = 'CLOSED' AND e.dealSize > 1000000",
        "patternName": "large_successful_deal",
        "relationshipType": "FOLLOWS_PATTERN"
      }
    }
  },
  "advancedRelationships": {
    "DEAL_SIMILARITY": {
      "domain": "Deal",
      "range": "Deal",
      "description": "Similarity relationship between deals based on multiple factors",
      "properties": {
        "score": { "type": "float", "description": "Similarity score between 0 and 1" },
        "factors": { "type": "array", "description": "List of factors used in similarity calculation" },
        "calculatedAt": { "type": "datetime", "description": "When the similarity was calculated" },
        "algorithm": { "type": "string", "description": "Algorithm used for similarity calculation" },
        "metadata": { "type": "object", "description": "Additional metadata about the similarity" }
      },
      "enabled": true,
      "algorithms": [
        {
          "name": "DEAL_SIMILARITY",
          "description": "Calculate similarity between deals based on multiple factors",
          "entityType": "Deal",
          "factors": [
            {
              "property": "sector",
              "weight": 0.4,
              "type": "categorical"
            },
            {
              "property": "dealSize",
              "weight": 0.3,
              "type": "numeric"
            },
            {
              "property": "dealType",
              "weight": 0.2,
              "type": "categorical"
            },
            {
              "property": "purpose",
              "weight": 0.1,
              "type": "categorical"
            }
          ],
          "threshold": 0.6,
          "metadata": {
            "algorithm": "weighted_property_similarity",
            "source": "deal_analysis"
          }
        }
      ],
      "customQuery": "MATCH (deal1:Deal)-[r:DEAL_SIMILARITY]->(deal2:Deal) WHERE r.score > 0.6 RETURN deal1.dealType as deal1Type, deal2.dealType as deal2Type, r.score as similarity, r.sector as sector ORDER BY r.score DESC"
    },
    "ORGANIZATION_SIMILARITY": {
      "domain": "Organization",
      "range": "Organization",
      "description": "Similarity relationship between organizations",
      "properties": {
        "score": { "type": "float", "description": "Similarity score between 0 and 1" },
        "factors": { "type": "array", "description": "List of factors used in similarity calculation" },
        "calculatedAt": { "type": "datetime", "description": "When the similarity was calculated" },
        "algorithm": { "type": "string", "description": "Algorithm used for similarity calculation" },
        "metadata": { "type": "object", "description": "Additional metadata about the similarity" }
      },
      "enabled": true,
      "algorithms": [
        {
          "name": "ORGANIZATION_SIMILARITY",
          "description": "Calculate similarity between organizations",
          "entityType": "Organization",
          "factors": [
            {
              "property": "industry",
              "weight": 0.5,
              "type": "categorical"
            },
            {
              "property": "size",
              "weight": 0.3,
              "type": "categorical"
            },
            {
              "property": "name",
              "weight": 0.2,
              "type": "fuzzy"
            }
          ],
          "threshold": 0.7,
          "metadata": {
            "algorithm": "weighted_property_similarity",
            "source": "organization_analysis"
          }
        }
      ],
      "customQuery": "MATCH (org1:Organization)-[r:ORGANIZATION_SIMILARITY]->(org2:Organization) WHERE r.score > 0.7 RETURN org1.name as org1Name, org2.name as org2Name, r.score as similarity, r.industry as industry ORDER BY r.score DESC"
    },
    "temporal": {
      "enabled": true,
      "patterns": [
        {
          "name": "DEAL_TIMELINE",
          "description": "Track deal progression over time",
          "entityTypes": ["Deal", "Organization"],
          "relationshipType": "DEAL_PROGRESSION",
          "confidence": 0.9,
          "metadata": {
            "source": "deal_analysis",
            "patternType": "deal_timeline"
          }
        },
        {
          "name": "INVESTMENT_CYCLE",
          "description": "Track investment cycles from fund to target",
          "entityTypes": ["Fund", "Deal", "Organization"],
          "relationshipType": "INVESTMENT_CYCLE",
          "confidence": 0.85,
          "metadata": {
            "source": "investment_analysis",
            "patternType": "investment_cycle"
          }
        }
      ],
      "timeWindow": {
        "defaultDuration": 365,
        "maxDuration": 1825,
        "minDuration": 1
      }
    },
    "hierarchical": {
      "enabled": true,
      "structures": [
        {
          "name": "FUND_PORTFOLIO_HIERARCHY",
          "description": "Fund to deal to target company hierarchy",
          "parentType": "Fund",
          "childType": "Deal",
          "relationshipType": "OWNS",
          "maxLevels": 3,
          "properties": {
            "hierarchyType": "investment_portfolio",
            "level": 1
          },
          "metadata": {
            "source": "portfolio_analysis",
            "confidence": 1.0
          }
        },
        {
          "name": "DEAL_TARGET_HIERARCHY",
          "description": "Deal to target company hierarchy",
          "parentType": "Deal",
          "childType": "Organization",
          "relationshipType": "TARGETS",
          "maxLevels": 2,
          "properties": {
            "hierarchyType": "deal_target",
            "level": 2
          },
          "metadata": {
            "source": "deal_analysis",
            "confidence": 0.95
          }
        }
      ]
    },
    "complex": {
      "enabled": true,
      "patterns": [
        {
          "name": "COMPETITIVE_RELATIONSHIP",
          "description": "Detect competitive relationships between organizations in same sector",
          "cypherQuery": "MATCH (org1:Organization)-[:INVOLVES]->(deal1:Deal) MATCH (org2:Organization)-[:INVOLVES]->(deal2:Deal) WHERE deal1 <> deal2 AND deal1.sector = deal2.sector AND org1 <> org2 RETURN org1.id as source, org2.id as target, deal1.sector as sector",
          "resultMapping": {
            "source": "source",
            "target": "target",
            "sector": "sector"
          },
          "confidence": 0.9,
          "enabled": true,
          "metadata": {
            "patternType": "competition_detection",
            "source": "market_analysis"
          }
        },
        {
          "name": "INVESTMENT_PATTERN",
          "description": "Detect funds with multiple deals in same sector",
          "cypherQuery": "MATCH (fund:Fund)-[:OWNS]->(deal:Deal) WITH fund, collect(deal) as deals WHERE size(deals) > 1 RETURN fund.id as source, 'multi_deal_pattern' as target, size(deals) as dealCount",
          "resultMapping": {
            "source": "source",
            "target": "target",
            "dealCount": "dealCount"
          },
          "confidence": 0.8,
          "enabled": true,
          "metadata": {
            "patternType": "investment_pattern",
            "source": "portfolio_analysis"
          }
        },
        {
          "name": "SECTOR_CONCENTRATION",
          "description": "Detect sector concentration patterns",
          "cypherQuery": "MATCH (fund:Fund)-[:OWNS]->(deal:Deal) WITH fund, deal.sector as sector, count(deal) as dealCount WHERE dealCount > 2 RETURN fund.id as source, sector as target, dealCount as concentration",
          "resultMapping": {
            "source": "source",
            "target": "target",
            "concentration": "concentration"
          },
          "confidence": 0.85,
          "enabled": true,
          "metadata": {
            "patternType": "sector_concentration",
            "source": "sector_analysis"
          }
        }
      ]
    },
    "queries": {
      "timeline": {
        "enabled": true,
        "customQuery": "MATCH (entity)-[:CONTAINS_ENTITY]->(relatedEntity) MATCH (c:Communication)-[:CONTAINS_ENTITY]->(relatedEntity) WITH entity, collect({entity: relatedEntity.name, date: c.date, subject: c.subject}) as timeline ORDER BY c.date RETURN entity.name as entityName, timeline"
      },
      "hierarchy": {
        "enabled": true,
        "customQuery": "MATCH path = (fund:Fund)-[:OWNS*1..2]->(target:Organization) RETURN fund.name as fundName, [node in nodes(path)[1..-1] | node.name] as hierarchy, target.name as targetName"
      },
      "similarity": {
        "enabled": true,
        "customQuery": "MATCH (entity1)-[r:SIMILARITY_RELATIONSHIP]->(entity2) WHERE r.score > 0.7 RETURN entity1.name as entity1Name, entity2.name as entity2Name, r.score as similarity, r.similarityType as type ORDER BY r.score DESC"
      },
      "complex": {
        "enabled": true,
        "customQuery": "MATCH (source)-[r:COMPLEX_RELATIONSHIP]->(target) WHERE r.confidence > 0.8 RETURN source.name as sourceName, target.name as targetName, r.type as relationshipType, r.confidence as confidence, r.properties as properties ORDER BY r.confidence DESC"
      }
    }
  }
} 